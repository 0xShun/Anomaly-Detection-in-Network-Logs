
ğŸš€ Starting local API tests...
Server: http://localhost:8000

ğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ª
LOCAL API INTEGRATION TEST SUITE
ğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ªğŸ§ª
Testing server: http://localhost:8000
Time: 2026-01-04 03:29:06

================================================================================
AUTHENTICATION
================================================================================
âœ… Successfully logged in as admin

================================================================================
TEST 1: Server Connectivity
================================================================================
âœ… Server is reachable at http://localhost:8000
   Status code: 200

================================================================================
TEST 2: API Logs Endpoint - Security Anomaly (Class 1)
================================================================================
Endpoint: http://localhost:8000/api/v1/logs/
Data: {
  "log_message": "Failed password for admin from 192.168.1.100 port 22 ssh2",
  "timestamp": "2026-01-04 03:29:06",
  "host_ip": "192.168.1.100",
  "source": "linux_test",
  "log_type": "ERROR",
  "classification_class": 1,
  "classification_name": "Security Anomaly",
  "anomaly_score": 0.9234,
  "severity": "critical",
  "is_anomaly": true
}

Response status: 403
Response body: {"detail":"Authentication credentials were not provided."}
âŒ Failed to create log: 403

================================================================================
TEST 3: API Logs Endpoint - System Failure (Class 2)
================================================================================
Endpoint: http://localhost:8000/api/v1/logs/
Data: {
  "log_message": "Kernel panic - not syncing: Fatal exception",
  "timestamp": "2026-01-04 03:29:06",
  "host_ip": "192.168.1.50",
  "source": "linux_test",
  "log_type": "ERROR",
  "classification_class": 2,
  "classification_name": "System Failure",
  "anomaly_score": 0.8765,
  "severity": "critical",
  "is_anomaly": true
}

Response status: 403
âŒ Failed: 403

================================================================================
TEST 4: API Logs Endpoint - Normal Log (Class 0)
================================================================================
Endpoint: http://localhost:8000/api/v1/logs/
Data: {
  "log_message": "GET /index.html HTTP/1.1 200 1234",
  "timestamp": "2026-01-04 03:29:06",
  "host_ip": "192.168.1.75",
  "source": "apache_test",
  "log_type": "INFO",
  "classification_class": 0,
  "classification_name": "Normal",
  "anomaly_score": 0.0234,
  "severity": "info",
  "is_anomaly": false
}

Response status: 403
âŒ Failed: 403

================================================================================
TEST 5: API Logs Endpoint - Performance Issue (Class 3, No Anomaly)
================================================================================
Endpoint: http://localhost:8000/api/v1/logs/
Data: {
  "log_message": "High CPU usage detected: 95%",
  "timestamp": "2026-01-04 03:29:06",
  "host_ip": "192.168.1.80",
  "source": "monitoring_test",
  "log_type": "WARNING",
  "classification_class": 3,
  "classification_name": "Performance Issue",
  "anomaly_score": 0.6543,
  "severity": "medium",
  "is_anomaly": false
}

Response status: 403
âŒ Failed: 403

================================================================================
TEST 6: Dashboard Data Visibility
================================================================================
âš ï¸  No logs created yet, skipping

================================================================================
TEST 7: Analytics Chart Data API
================================================================================

ğŸ“Š Testing Line Chart API...
âœ… Line chart API accessible
   Chart type: line
   Chart title: Log Volume Over Time (By Minute)
   Data points: 0
   â„¹ï¸  No data points (database might be empty)

ğŸ¥§ Testing Pie Chart API...
âœ… Pie chart API accessible
   Chart type: pie
   Chart title: Classification Distribution
   Classifications: 0
   â„¹ï¸  No data (database might be empty)

ğŸ“Š Analytics API: 2/2 endpoints working

================================================================================
TEST 8: Analytics Page Visibility
================================================================================
âœ… Analytics page accessible

   Chart elements:
   âœ… Volume Chart Canvas
   âœ… Type Chart Canvas
   âœ… Chart.js Library
   âœ… Refresh Charts Button
   âœ… Log Volume Title
   âœ… Classification Distribution

================================================================================
TEST 9: API Error Handling
================================================================================
Testing with missing required fields...
Response status: 403
âš ï¸  Expected 400, got 403

================================================================================
TEST 10: End-to-End Data Flow
================================================================================
Creating test log with unique identifier...

1ï¸âƒ£  Sending log via API...
âŒ Failed to create log: 403

================================================================================
TEST SUMMARY
================================================================================
âœ… PASS - Connectivity
âŒ FAIL - Api Security
âŒ FAIL - Api System Failure
âŒ FAIL - Api Normal
âŒ FAIL - Api Performance
âœ… PASS - Dashboard Visibility
âœ… PASS - Analytics Api
âœ… PASS - Analytics Page
âŒ FAIL - Error Handling
âŒ FAIL - End To End

Results: 4/10 tests passed

âš ï¸  6 test(s) failed. Please review the errors above.
ğŸš€ Starting Django server...
â³ Waiting for server to start...
ğŸ§ª Running tests...


ğŸ›‘ Stopping server...
âœ… Server stopped
